{"ast":null,"code":"import _defineProperty from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Switch,Route,Link,BrowserRouter as Router}from\"react-router-dom\";import'./App.css';import HomePage from'./components/HomePage';import CitizenPage from'./components/CitizenPage';import VisitorPage from'./components/VisitorPage';import AffairsPage from'./components/AffairsPage';import AmbassadorPage from'./components/AmbassadorPage';import DocumentsPage from'./components/DocumentsPage';import MinistryPage from'./components/MinistryPage';import ContactPage from'./components/ContactPage';import Login from'./components/Login';import PostingList from'./components/PostingList';import PassportPage from'./components/VisaPage';import VisaPage from'./components/VisaPage';import ViewPosting from'./components/ViewPosting';import AddPosting from'./components/AddPosting';import ServicePage from'./components/ServicePage';import Footer from'./components/Footer';import Banner from'./components/Banner';import Context from\"./Context\";import CitizensPage from\"./components/CitizenPage\";import VistorPage from\"./components/VisitorPage\";import axios from'axios';import jwt_decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.addPosting=function(posting,callback){var postings=_this.state.postings.slice();postings.push(posting);_this.setState({postings:postings},function(){return callback&&callback();});};_this.login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var res,_jwt_decode,_email,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('http://localhost:3001/login',{email:email,password:password}).catch(function(res){return{status:401,message:'Unauthorized'};});case 2:res=_context.sent;if(!(res.status===200)){_context.next=11;break;}_jwt_decode=jwt_decode(res.data.accessToken),_email=_jwt_decode.email;user={email:_email,token:res.data.accessToken,accessLevel:_email==='admin@example.com'?0:1};_this.setState({user:user});localStorage.setItem(\"user\",JSON.stringify(user));return _context.abrupt(\"return\",true);case 11:return _context.abrupt(\"return\",false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.logout=function(e){e.preventDefault();_this.setState({user:null});localStorage.removeItem(\"user\");};_this.state={user:null,postings:[]};_this.routerRef=/*#__PURE__*/React.createRef();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user,postings;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user=localStorage.getItem(\"user\");_context2.next=3;return axios.get('http://localhost:3001/postings');case 3:postings=_context2.sent;user=user?JSON.parse(user):null;this.setState({user:user,postings:postings.data});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(){window.scrollTo(0,0);}},{key:\"render\",value:function render(){var _this2=this,_jsx2;return/*#__PURE__*/_jsx(Context.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{login:this.login,addPosting:this.addPosting}),children:/*#__PURE__*/_jsx(Router,{ref:this.routerRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",role:\"navigation\",\"aria-label\":\"main navigation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-brand\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"navbar-item is-expanded is-tab is-size-4 \",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-item\",children:/*#__PURE__*/_jsx(\"span\",{className:\"wrap-text\",children:\"JHC Nigeria\"})})}),/*#__PURE__*/_jsxs(\"label\",{role:\"button\",className:\"navbar-burger burger\",\"aria-label\":\"menu\",\"aria-expanded\":\"false\",\"data-target\":\"navbarBasicExample\",onClick:function onClick(e){e.preventDefault();_this2.setState({showMenu:!_this2.state.showMenu});},children:[/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-menu \".concat(this.state.showMenu?\"is-active\":\"\"),children:[/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Home \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Page\"]})}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/citizens\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Jamaican \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Nationals\"]})}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/visitors\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Visiting \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Jamaica \"]})}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/affairs\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Consulate \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Affairs\"]})}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/services\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Consulate \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Services\"]})}),this.state.user&&this.state.user.accessLevel<1&&/*#__PURE__*/_jsx(Link,{to:\"/add-posting\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Add \",/*#__PURE__*/_jsx(\"br\",{className:\"wrap-text\"}),\" Post\"]})}),/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/contact\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Contact\"})}),!this.state.user?/*#__PURE__*/_jsx(Link,{onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/login\",className:\"navbar-item is-expanded is-tab\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})}):/*#__PURE__*/_jsx(Link,(_jsx2={onClick:function onClick(){_this2.setState({showMenu:!_this2.state.showMenu});},to:\"/\"},_defineProperty(_jsx2,\"onClick\",this.logout),_defineProperty(_jsx2,\"className\",\"navbar-item is-expanded is-tab\"),_defineProperty(_jsx2,\"children\",/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})),_jsx2))]})]}),/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/citizens\",component:CitizenPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/postings\",component:PostingList}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/visitors\",component:VistorPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/affairs\",component:AffairsPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/services\",component:ServicePage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/add-posting\",component:AddPosting}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/contact\",component:ContactPage})]}),/*#__PURE__*/_jsx(Footer,{})]})})});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/App.js"],"names":["React","Component","Switch","Route","Link","BrowserRouter","Router","HomePage","CitizenPage","VisitorPage","AffairsPage","AmbassadorPage","DocumentsPage","MinistryPage","ContactPage","Login","PostingList","PassportPage","VisaPage","ViewPosting","AddPosting","ServicePage","Footer","Banner","Context","CitizensPage","VistorPage","axios","jwt_decode","App","props","addPosting","posting","callback","postings","state","slice","push","setState","login","email","password","post","catch","res","status","message","data","accessToken","user","token","accessLevel","localStorage","setItem","JSON","stringify","logout","e","preventDefault","removeItem","routerRef","createRef","getItem","get","parse","window","scrollTo","showMenu"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\nimport './App.css';\nimport HomePage from './components/HomePage';\nimport CitizenPage from './components/CitizenPage';\nimport VisitorPage from './components/VisitorPage';\nimport AffairsPage from './components/AffairsPage';\nimport AmbassadorPage from './components/AmbassadorPage';\nimport DocumentsPage from './components/DocumentsPage';\nimport MinistryPage from './components/MinistryPage';\nimport ContactPage from './components/ContactPage';\nimport Login from './components/Login';\nimport PostingList from './components/PostingList';\nimport PassportPage from './components/VisaPage';\nimport VisaPage from './components/VisaPage';\nimport ViewPosting from './components/ViewPosting';\nimport AddPosting from './components/AddPosting';\nimport ServicePage from './components/ServicePage';\n\nimport Footer from './components/Footer';\nimport Banner from './components/Banner';\nimport Context from \"./Context\";\nimport CitizensPage from \"./components/CitizenPage\";\nimport VistorPage from \"./components/VisitorPage\";\n\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      postings: []\n    };\n    this.routerRef = React.createRef();\n  }\n\n  \n\n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    const postings = await axios.get('http://localhost:3001/postings');\n    user = user ? JSON.parse(user) : null;\n    this.setState({ user, postings : postings.data });\n  }\n\n  componentDidUpdate(){\n    window.scrollTo(0, 0);\n  }\n\n  addPosting = (posting, callback) => {\n    let postings = this.state.postings.slice();\n    postings.push(posting);\n    this.setState({ postings }, () => callback && callback());\n  };\n  \n  login = async (email, password) => {\n    const res = await axios.post(\n      'http://localhost:3001/login',\n      { email, password },\n    ).catch((res) => {\n      return { status: 401, message: 'Unauthorized' }\n    })\n  \n    if(res.status === 200) {\n      const { email } = jwt_decode(res.data.accessToken)\n      const user = {\n        email,\n        token: res.data.accessToken,\n        accessLevel: email === 'admin@example.com' ? 0 : 1\n      }\n  \n      this.setState({ user });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  logout = e => {\n    e.preventDefault();\n    this.setState({ user: null });\n    localStorage.removeItem(\"user\");\n  };\n  \n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          ...this.state,\n          login: this.login,\n          addPosting:this.addPosting\n        }}\n      >\n        <Router ref={this.routerRef}>\n        <div className=\"App\">\n          <nav\n            className=\"navbar\"\n            role=\"navigation\"\n            aria-label=\"main navigation\"\n          >\n            <div className=\"navbar-brand\">\n              <b className=\"navbar-item is-expanded is-tab is-size-4 \"><Link to=\"/\" className=\"navbar-item\">\n                  <span className=\"wrap-text\">JHC Nigeria</span>\n                </Link></b>\n              <label\n                role=\"button\"\n                className=\"navbar-burger burger\"\n                aria-label=\"menu\"\n                aria-expanded=\"false\"\n                data-target=\"navbarBasicExample\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ showMenu: !this.state.showMenu });\n                }}\n              >\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n              </label>\n            </div>\n              <div className={`navbar-menu ${\n                  this.state.showMenu ? \"is-active\" : \"\"\n                }`}>\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/\" className=\"navbar-item is-expanded is-tab\">\n                <span>Home <br className=\"wrap-text\"/> Page</span>\n                </Link>\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/citizens\" className=\"navbar-item is-expanded is-tab\">\n                <span>Jamaican <br className=\"wrap-text\"/> Nationals</span>\n                </Link>\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/visitors\" className=\"navbar-item is-expanded is-tab\">\n                <span>Visiting <br className=\"wrap-text\"/> Jamaica </span>\n                </Link>\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/affairs\" className=\"navbar-item is-expanded is-tab\">\n                <span>Consulate <br className=\"wrap-text\"/> Affairs</span>\n                </Link>\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/services\" className=\"navbar-item is-expanded is-tab\">\n                <span>Consulate <br className=\"wrap-text\"/> Services</span>\n                </Link>\n                \n                {this.state.user && this.state.user.accessLevel < 1 && (\n                  <Link to=\"/add-posting\" className=\"navbar-item is-expanded is-tab\">\n                    <span>Add <br className=\"wrap-text\"/> Post</span>\n                  </Link>\n                )}\n\n                <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/contact\" className=\"navbar-item is-expanded is-tab\">\n                  <span>Contact</span>\n                </Link>\n                {!this.state.user ? (\n                  <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/login\" className=\"navbar-item is-expanded is-tab\">\n                    <span>Login</span>\n                  </Link>\n                ) : (\n                  <Link onClick={ () => {this.setState({ showMenu: !this.state.showMenu })}}  to=\"/\" onClick={this.logout} className=\"navbar-item is-expanded is-tab\">\n                    <span>Logout</span>\n                  </Link>\n                )}\n              </div>\n            </nav>\n            <Banner />\n            <Switch>\n              <Route exact path=\"/\" component={HomePage} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/citizens\" component={CitizenPage} />\n              <Route exact path=\"/postings\" component={PostingList} />\n              <Route exact path=\"/visitors\" component={VistorPage} />\n              <Route exact path=\"/affairs\" component={AffairsPage} />\n              <Route exact path=\"/services\" component={ServicePage} />\n              <Route exact path=\"/add-posting\" component={AddPosting} />\n              <Route exact path=\"/contact\" component={ContactPage} />\n            </Switch>\n            <Footer />\n          </div>\n        </Router>\n      </Context.Provider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}