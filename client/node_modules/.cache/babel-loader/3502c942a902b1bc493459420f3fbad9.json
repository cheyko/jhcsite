{"ast":null,"code":"import _defineProperty from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import withContext from\"../withContext\";import{Redirect}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initState={title:\"\",type:\"\",author:\"\",date:\"\",description:\"\",body:\"\",postingTypes:[\"Article\",\"Notice\"]};var AddPosting=/*#__PURE__*/function(_Component){_inherits(AddPosting,_Component);var _super=_createSuper(AddPosting);function AddPosting(props){var _this;_classCallCheck(this,AddPosting);_this=_super.call(this,props);_this.save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,title,type,author,date,description,body,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,title=_this$state.title,type=_this$state.type,author=_this$state.author,date=_this$state.date,description=_this$state.description,body=_this$state.body;if(!(title&&body)){_context.next=10;break;}id=Math.random().toString(36).substring(2)+Date.now().toString(36);_context.next=6;return axios.post('http://localhost:3001/postings',{id:id,title:title,type:type,author:author,date:date,description:description,body:body});case 6:_this.props.context.addPosting({title:title,type:type,author:author,date:date,description:description,body:body},function(){return _this.setState(initState);});_this.setState({flash:{status:'is-success',msg:'Posting created successfully'}});_context.next=11;break;case 10:_this.setState({flash:{status:'is-danger',msg:'Please enter Title and Body of Notice or Article'}});case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var _this$setState;return _this.setState((_this$setState={},_defineProperty(_this$setState,e.target.name,e.target.value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));};_this.state=initState;return _this;}_createClass(AddPosting,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,title=_this$state2.title,type=_this$state2.type,author=_this$state2.author,date=_this$state2.date,description=_this$state2.description,body=_this$state2.body,postingTypes=_this$state2.postingTypes;var user=this.props.context.user;return!(user&&user.accessLevel<1)?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero is-primary \",children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-body container\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:\"Add Article or Notice\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{onSubmit:this.save,children:/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile is-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-one-third\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Title Of Post: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"title\",value:title,onChange:this.handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Type Of Post: \"}),postingTypes.map(function(option,index){return/*#__PURE__*/_jsxs(\"label\",{children:[option,\" \",\" \",/*#__PURE__*/_jsx(\"input\",{name:\"type\",value:option,onSelect:_this2.handleChange,type:\"radio\"}),\" \",\" \"]},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Author Of Post: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"author\",value:author,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",rows:\"3\",style:{resize:\"none\"},name:\"description\",value:description,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Body / Content : \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",rows:\"6\",style:{resize:\"block\"},name:\"body\",value:body,onChange:this.handleChange})]}),this.state.flash&&/*#__PURE__*/_jsx(\"div\",{className:\"notification \".concat(this.state.flash.status),children:this.state.flash.msg}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-clearfix\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-primary is-outlined is-pulled-right\",type:\"submit\",onClick:this.save,children:\"Submit\"})})]})})})]});}}]);return AddPosting;}(Component);export default withContext(AddPosting);","map":{"version":3,"sources":["/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/components/AddPosting.js"],"names":["React","Component","withContext","Redirect","axios","initState","title","type","author","date","description","body","postingTypes","AddPosting","props","save","e","preventDefault","state","id","Math","random","toString","substring","Date","now","post","context","addPosting","setState","flash","status","msg","handleChange","target","name","value","user","accessLevel","map","option","index","resize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\n\nconst initState = {\n  title: \"\",\n  type: \"\",\n  author: \"\",\n  date: \"\",\n  description: \"\",\n  body: \"\",\n  postingTypes : [\"Article\",\"Notice\"]\n};\n\nclass AddPosting extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initState;\n  }\n\n  save = async (e) => {\n    e.preventDefault();\n    const { title, type, author, date, description, body } = this.state;\n\n    if (title && body) {\n      const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\n\n      await axios.post(\n        'http://localhost:3001/postings',\n        { id, title, type, author, date, description, body },\n      )\n\n      this.props.context.addPosting(\n        {\n          title, type, author, date, description, body\n        },\n        () => this.setState(initState)\n      );\n      this.setState(\n        { flash: { status: 'is-success', msg: 'Posting created successfully' }}\n      );\n\n    } else {\n      this.setState(\n        { flash: { status: 'is-danger', msg: 'Please enter Title and Body of Notice or Article' }}\n      );\n    }\n  };\n\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\n\n  render() {\n    const { title, type, author, date, description, body, postingTypes } = this.state;\n    const { user } = this.props.context;\n\n    return !(user && user.accessLevel < 1) ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <>\n        <div className=\"hero is-primary \">\n          <div className=\"hero-body container\">\n            <h4 className=\"title\">Add Article or Notice</h4>\n          </div>\n        </div>\n        <br />\n        <br />\n        <form onSubmit={this.save}>\n          <div className=\"columns is-mobile is-centered\">\n            <div className=\"column is-one-third\">\n              <div className=\"field\">\n                <label className=\"label\">Title Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"title\"\n                  value={title}\n                  onChange={this.handleChange}\n                  required\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Type Of Post: </label>\n                {postingTypes.map((option,index) => (\n                  <label key={index}>\n                    {option} {\" \"}\n                    <input\n                      name=\"type\"\n                      value={option}\n                      onSelect={this.handleChange}\n                      type=\"radio\"\n                    /> {\" \"}\n                    </label>\n                  \n                  ))}\n              </div>\n              <div className=\"field\">\n              <label className=\"label\">Author Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"author\"\n                  value={author}\n                  onChange={this.handleChange}\n                  \n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Description: </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"3\"\n                  style={{ resize: \"none\"}}\n                  name=\"description\"\n                  value={description}\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Body / Content : </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"6\"\n                  style={{ resize: \"block\"}}\n                  name=\"body\"\n                  value={body}\n                  onChange={this.handleChange}\n                />\n              </div>\n              {this.state.flash && (\n                <div className={`notification ${this.state.flash.status}`}>\n                  {this.state.flash.msg}\n                </div>\n              )}\n              <div className=\"field is-clearfix\">\n                <button\n                  className=\"button is-primary is-outlined is-pulled-right\"\n                  type=\"submit\"\n                  onClick={this.save}\n                >\n                  Submit\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n\nexport default withContext(AddPosting);"]},"metadata":{},"sourceType":"module"}