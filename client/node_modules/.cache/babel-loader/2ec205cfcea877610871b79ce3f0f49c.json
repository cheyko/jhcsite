{"ast":null,"code":"var _jsxFileName = \"/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/components/AddPosting.js\";\nimport React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initState = {\n  title: \"\",\n  category: \"\",\n  author: \"\",\n  date: \"\",\n  description: \"\",\n  body: \"\",\n  categories: [\"Article\", \"Notice\"],\n  photos: []\n};\n\nclass AddPosting extends Component {\n  constructor(props) {\n    super(props);\n\n    this.FormatDate = d => {\n      var month = d.getMonth() + 1;\n      var day = d.getDate();\n      var year = d.getFullYear();\n      return year + \"-\" + month + \"-\" + day;\n    };\n\n    this.save = async e => {\n      e.preventDefault();\n      const {\n        title,\n        category,\n        author,\n        description,\n        body,\n        photos\n      } = this.state;\n      console.log(photos);\n\n      if (title && body && category) {\n        //const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\n        const date = this.FormatDate(new Date());\n        const res = await axios.post('/api/postings', {\n          title,\n          category,\n          author,\n          date,\n          description,\n          body,\n          photos\n        });\n        const numOfPics = res.numOfPics; // might not be needed, compare count b4 and after\n\n        const id = res.id;\n        this.props.context.addPosting({\n          id,\n          title,\n          category,\n          author,\n          date,\n          description,\n          body\n        }, () => this.setState(initState));\n        this.setState({\n          flash: {\n            status: 'is-success',\n            msg: 'Posting created successfully'\n          }\n        });\n      } else {\n        this.setState({\n          flash: {\n            status: 'is-danger',\n            msg: 'Please enter Title and Body of Notice or Article'\n          }\n        });\n      }\n    };\n\n    this.handleChange = e => this.setState({\n      [e.target.name]: e.target.value,\n      error: \"\"\n    });\n\n    this.handlePhotos = e => this.setState({\n      [e.target.name]: Array.from(e.target.files),\n      error: \"\"\n    });\n\n    this.state = initState;\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    const {\n      title,\n      category,\n      author,\n      date,\n      description,\n      body,\n      categories\n    } = this.state;\n    const {\n      user\n    } = this.props.context;\n    return !(user && user.accessLevel < 1) ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero is-primary \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-body container\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"title\",\n            children: \"Add Article or Notice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.save,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns is-mobile is-centered\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-one-third\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Title Of Post: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"text\",\n                name: \"title\",\n                value: title,\n                onChange: this.handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Category Of Post: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), categories.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [option, \" \", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"category\",\n                  value: option,\n                  onChange: this.handleChange,\n                  type: \"radio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 21\n                }, this), \" \", \" \"]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Author Of Post: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"text\",\n                name: \"author\",\n                value: author,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Description: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"textarea\",\n                type: \"text\",\n                rows: \"3\",\n                style: {\n                  resize: \"none\"\n                },\n                name: \"description\",\n                value: description,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Body / Content : \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"textarea\",\n                type: \"text\",\n                rows: \"6\",\n                style: {\n                  resize: \"block\"\n                },\n                name: \"body\",\n                value: body,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Photos: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"photos\",\n                type: \"file\",\n                multiple: true,\n                onChange: this.handlePhotos\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), this.state.flash && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `notification ${this.state.flash.status}`,\n              children: this.state.flash.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field is-clearfix\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button is-primary is-outlined is-pulled-right\",\n                type: \"submit\",\n                onClick: this.save,\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withContext(AddPosting);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/components/AddPosting.js"],"names":["React","Component","withContext","Redirect","axios","initState","title","category","author","date","description","body","categories","photos","AddPosting","constructor","props","FormatDate","d","month","getMonth","day","getDate","year","getFullYear","save","e","preventDefault","state","console","log","Date","res","post","numOfPics","id","context","addPosting","setState","flash","status","msg","handleChange","target","name","value","error","handlePhotos","Array","from","files","componentDidMount","window","scrollTo","render","user","accessLevel","map","option","index","resize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\n\nconst initState = {\n  title: \"\",\n  category: \"\",\n  author: \"\",\n  date: \"\",\n  description: \"\",\n  body: \"\",\n  categories : [\"Article\",\"Notice\"],\n  photos : []\n};\n\nclass AddPosting extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initState;\n  }\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  FormatDate = d => {\n    var month = d.getMonth()+1;\n    var day = d.getDate();\n    var year = d.getFullYear();\n    return (year + \"-\" + month + \"-\" + day);\n  }\n\n  save = async (e) => {\n    e.preventDefault();\n    const { title, category, author, description, body, photos } = this.state;\n    console.log(photos);\n    if (title && body && category) {\n      //const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\n      const date = this.FormatDate(new Date());\n      const res = await axios.post(\n        '/api/postings',\n        { title, category, author, date, description, body, photos },\n      )\n\n      const numOfPics = res.numOfPics; // might not be needed, compare count b4 and after\n      const id = res.id;\n\n      this.props.context.addPosting(\n        {\n          id, title, category, author, date, description, body\n        },\n        () => this.setState(initState)\n      );\n      this.setState(\n        { flash: { status: 'is-success', msg: 'Posting created successfully' }}\n      );\n\n    } else {\n      this.setState(\n        { flash: { status: 'is-danger', msg: 'Please enter Title and Body of Notice or Article' }}\n      );\n    }\n  };\n\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\n  handlePhotos = e => this.setState({ [e.target.name]: Array.from(e.target.files), error: \"\" })\n\n  render() {\n    const { title, category, author, date, description, body, categories } = this.state;\n    const { user } = this.props.context;\n\n    return !(user && user.accessLevel < 1) ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <>\n        <div className=\"hero is-primary \">\n          <div className=\"hero-body container\">\n            <h4 className=\"title\">Add Article or Notice</h4>\n          </div>\n        </div>\n        <br />\n        <br />\n        <form onSubmit={this.save}>\n          <div className=\"columns is-mobile is-centered\">\n            <div className=\"column is-one-third\">\n              <div className=\"field\">\n                <label className=\"label\">Title Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"title\"\n                  value={title}\n                  onChange={this.handleChange}\n                  required\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Category Of Post: </label>\n                {categories.map((option,index) => (\n                  <label key={index}>\n                    {option} {\" \"}\n                    <input\n                      name=\"category\"\n                      value={option}\n                      onChange={this.handleChange}\n                      type=\"radio\"\n                    /> {\" \"}\n                    </label>\n                  \n                  ))}\n              </div>\n              <div className=\"field\">\n              <label className=\"label\">Author Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"author\"\n                  value={author}\n                  onChange={this.handleChange}\n                  \n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Description: </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"3\"\n                  style={{ resize: \"none\"}}\n                  name=\"description\"\n                  value={description}\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Body / Content : </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"6\"\n                  style={{ resize: \"block\"}}\n                  name=\"body\"\n                  value={body}\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Photos: </label>\n                <input \n                  name=\"photos\"\n                  type=\"file\"\n                  multiple\n                  onChange={this.handlePhotos}\n                />\n              </div>\n              {this.state.flash && (\n                <div className={`notification ${this.state.flash.status}`}>\n                  {this.state.flash.msg}\n                </div>\n              )}\n              <div className=\"field is-clearfix\">\n                <button\n                  className=\"button is-primary is-outlined is-pulled-right\"\n                  type=\"submit\"\n                  onClick={this.save}\n                >\n                  Submit\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n\nexport default withContext(AddPosting);"]},"metadata":{},"sourceType":"module"}