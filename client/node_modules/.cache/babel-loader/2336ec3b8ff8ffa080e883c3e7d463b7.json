{"ast":null,"code":"var _jsxFileName = \"/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\nimport HomePage from './components/HomePage';\nimport CitizenPage from './components/CitizenPage';\nimport VisitorPage from './components/VisitorPage';\nimport AffairsPage from './components/AffairsPage';\nimport AmbassadorPage from './components/AmbassadorPage';\nimport DocumentsPage from './components/DocumentsPage';\nimport MinistryPage from './components/MinistryPage';\nimport ContactPage from './components/ContactPage';\nimport Login from './components/Login';\nimport PostingList from './components/PostingList';\nimport PassportPage from './components/VisaPage';\nimport VisaPage from './components/VisaPage';\nimport ViewPosting from './components/ViewPosting';\nimport AddPosting from './components/AddPosting';\nimport ServicePage from './components/ServicePage';\nimport Context from \"./Context\";\nimport CitizensPage from \"./components/CitizenPage\";\nimport VistorPage from \"./components/VisitorPage\";\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addPosting = (posting, callback) => {\n      let postings = this.state.postings.slice();\n      postings.push(posting);\n      this.setState({\n        postings\n      }, () => callback && callback());\n    };\n\n    this.login = async (email, password) => {\n      const res = await axios.post('http://localhost:3001/login', {\n        email,\n        password\n      }).catch(res => {\n        return {\n          status: 401,\n          message: 'Unauthorized'\n        };\n      });\n\n      if (res.status === 200) {\n        const {\n          email\n        } = jwt_decode(res.data.accessToken);\n        const user = {\n          email,\n          token: res.data.accessToken,\n          accessLevel: email === 'admin@example.com' ? 0 : 1\n        };\n        this.setState({\n          user\n        });\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      this.setState({\n        user: null\n      });\n      localStorage.removeItem(\"user\");\n    };\n\n    this.state = {\n      user: null,\n      postings: []\n    };\n    this.routerRef = /*#__PURE__*/React.createRef();\n  }\n\n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    const postings = await axios.get('http://localhost:3001/postings');\n    user = user ? JSON.parse(user) : null;\n    this.setState({\n      user,\n      postings: postings.data\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Context.Provider, {\n      value: { ...this.state,\n        login: this.login,\n        addPosting: this.addPosting\n      },\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        ref: this.routerRef,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container is-fluid\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notification is-primary\",\n              children: \"Place Banner HERE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"navbar container\",\n            role: \"navigation\",\n            \"aria-label\": \"main navigation\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"navbar-brand\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"navbar-item is-size-4 \",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/\",\n                  className: \"navbar-item\",\n                  children: \"JHC Nigeria\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                role: \"button\",\n                className: \"navbar-burger burger\",\n                \"aria-label\": \"menu\",\n                \"aria-expanded\": \"false\",\n                \"data-target\": \"navbarBasicExample\",\n                onClick: e => {\n                  e.preventDefault();\n                  this.setState({\n                    showMenu: !this.state.showMenu\n                  });\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `navbar-menu ${this.state.showMenu ? \"is-active\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/citizens\",\n                className: \"navbar-item\",\n                children: \"Jamaican Nationals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/visitors\",\n                className: \"navbar-item\",\n                children: \"Visiting Jamaica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/affairs\",\n                className: \"navbar-item\",\n                children: \"Consulate Affairs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/services\",\n                className: \"navbar-item\",\n                children: \"Consulate Services\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), this.state.user && this.state.user.accessLevel < 1 && /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/add-posting\",\n                className: \"navbar-item\",\n                children: \"Add Notice\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/contact\",\n                className: \"navbar-item\",\n                children: \"Contact\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), !this.state.user ? /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                className: \"navbar-item\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                onClick: this.logout,\n                className: \"navbar-item\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Switch, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/\",\n              component: HomePage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/login\",\n              component: Login\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/citizens\",\n              component: CitizenPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/postings\",\n              component: PostingList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/visitors\",\n              component: VistorPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/affairs\",\n              component: AffairsPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/services\",\n              component: ServicePage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/add-posting\",\n              component: AddPosting\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/contact\",\n              component: ContactPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/App.js"],"names":["React","Component","Switch","Route","Link","BrowserRouter","Router","HomePage","CitizenPage","VisitorPage","AffairsPage","AmbassadorPage","DocumentsPage","MinistryPage","ContactPage","Login","PostingList","PassportPage","VisaPage","ViewPosting","AddPosting","ServicePage","Context","CitizensPage","VistorPage","axios","jwt_decode","App","constructor","props","addPosting","posting","callback","postings","state","slice","push","setState","login","email","password","res","post","catch","status","message","data","accessToken","user","token","accessLevel","localStorage","setItem","JSON","stringify","logout","e","preventDefault","removeItem","routerRef","createRef","componentDidMount","getItem","get","parse","render","showMenu"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\n\nimport HomePage from './components/HomePage';\nimport CitizenPage from './components/CitizenPage';\nimport VisitorPage from './components/VisitorPage';\nimport AffairsPage from './components/AffairsPage';\nimport AmbassadorPage from './components/AmbassadorPage';\nimport DocumentsPage from './components/DocumentsPage';\nimport MinistryPage from './components/MinistryPage';\nimport ContactPage from './components/ContactPage';\nimport Login from './components/Login';\nimport PostingList from './components/PostingList';\nimport PassportPage from './components/VisaPage';\nimport VisaPage from './components/VisaPage';\nimport ViewPosting from './components/ViewPosting';\nimport AddPosting from './components/AddPosting';\nimport ServicePage from './components/ServicePage';\n\nimport Context from \"./Context\";\nimport CitizensPage from \"./components/CitizenPage\";\nimport VistorPage from \"./components/VisitorPage\";\n\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      postings: []\n    };\n    this.routerRef = React.createRef();\n  }\n\n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    const postings = await axios.get('http://localhost:3001/postings');\n    user = user ? JSON.parse(user) : null;\n    this.setState({ user, postings : postings.data });\n  }\n\n  addPosting = (posting, callback) => {\n    let postings = this.state.postings.slice();\n    postings.push(posting);\n    this.setState({ postings }, () => callback && callback());\n  };\n  \n  login = async (email, password) => {\n    const res = await axios.post(\n      'http://localhost:3001/login',\n      { email, password },\n    ).catch((res) => {\n      return { status: 401, message: 'Unauthorized' }\n    })\n  \n    if(res.status === 200) {\n      const { email } = jwt_decode(res.data.accessToken)\n      const user = {\n        email,\n        token: res.data.accessToken,\n        accessLevel: email === 'admin@example.com' ? 0 : 1\n      }\n  \n      this.setState({ user });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  logout = e => {\n    e.preventDefault();\n    this.setState({ user: null });\n    localStorage.removeItem(\"user\");\n  };\n  \n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          ...this.state,\n          login: this.login,\n          addPosting:this.addPosting\n        }}\n      >\n        <Router ref={this.routerRef}>\n        <div className=\"App\">\n          <div className=\"container is-fluid\">\n            <div className=\"notification is-primary\">\n              Place Banner HERE\n            </div>\n          </div>\n          <nav\n            className=\"navbar container\"\n            role=\"navigation\"\n            aria-label=\"main navigation\"\n          >\n            <div className=\"navbar-brand\">\n              <b className=\"navbar-item is-size-4 \"><Link to=\"/\" className=\"navbar-item\">\n                  JHC Nigeria\n                </Link></b>\n              <label\n                role=\"button\"\n                className=\"navbar-burger burger\"\n                aria-label=\"menu\"\n                aria-expanded=\"false\"\n                data-target=\"navbarBasicExample\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ showMenu: !this.state.showMenu });\n                }}\n              >\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n              </label>\n            </div>\n              <div className={`navbar-menu ${\n                  this.state.showMenu ? \"is-active\" : \"\"\n                }`}>\n                <Link to=\"/citizens\" className=\"navbar-item\">\n                  Jamaican Nationals\n                </Link>\n                <Link to=\"/visitors\" className=\"navbar-item\">\n                  Visiting Jamaica \n                </Link>\n                <Link to=\"/affairs\" className=\"navbar-item\">\n                  Consulate Affairs\n                </Link>\n                <Link to=\"/services\" className=\"navbar-item\">\n                  Consulate Services\n                </Link>\n                \n                {this.state.user && this.state.user.accessLevel < 1 && (\n                  <Link to=\"/add-posting\" className=\"navbar-item\">\n                    Add Notice\n                  </Link>\n                )}\n\n                <Link to=\"/contact\" className=\"navbar-item\">\n                  Contact\n                </Link>\n                {!this.state.user ? (\n                  <Link to=\"/login\" className=\"navbar-item\">\n                    Login\n                  </Link>\n                ) : (\n                  <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\n                    Logout\n                  </Link>\n                )}\n              </div>\n            </nav>\n            <Switch>\n              <Route exact path=\"/\" component={HomePage} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/citizens\" component={CitizenPage} />\n              <Route exact path=\"/postings\" component={PostingList} />\n              <Route exact path=\"/visitors\" component={VistorPage} />\n              <Route exact path=\"/affairs\" component={AffairsPage} />\n              <Route exact path=\"/services\" component={ServicePage} />\n              <Route exact path=\"/add-posting\" component={AddPosting} />\n              <Route exact path=\"/contact\" component={ContactPage} />\n            </Switch>\n          </div>\n        </Router>\n      </Context.Provider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}