{"ast":null,"code":"import _defineProperty from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/cheykodon_7/Documents/WorkHome/jhcsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import withContext from\"../withContext\";import{Redirect}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initState={title:\"\",category:\"\",author:\"\",date:\"\",description:\"\",body:\"\",categories:[\"Article\",\"Notice\"]};var AddPosting=/*#__PURE__*/function(_Component){_inherits(AddPosting,_Component);var _super=_createSuper(AddPosting);function AddPosting(props){var _this;_classCallCheck(this,AddPosting);_this=_super.call(this,props);_this.FormatDate=function(d){var month=d.getMonth()+1;var day=d.getDate();var year=d.getFullYear();return year+\"-\"+month+\"-\"+day;};_this.save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,title,category,author,description,body,date,res,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,title=_this$state.title,category=_this$state.category,author=_this$state.author,description=_this$state.description,body=_this$state.body;if(!(title&&body&&category)){_context.next=12;break;}//const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\ndate=_this.FormatDate(new Date());_context.next=6;return axios.post('/api/postings',{title:title,category:category,author:author,date:date,description:description,body:body});case 6:res=_context.sent;id=res.id;_this.props.context.addPosting({id:id,title:title,category:category,author:author,date:date,description:description,body:body},function(){return _this.setState(initState);});_this.setState({flash:{status:'is-success',msg:'Posting created successfully'}});_context.next=13;break;case 12:_this.setState({flash:{status:'is-danger',msg:'Please enter Title and Body of Notice or Article'}});case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var _this$setState;return _this.setState((_this$setState={},_defineProperty(_this$setState,e.target.name,e.target.value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));};_this.state=initState;return _this;}_createClass(AddPosting,[{key:\"componentDidMount\",value:function componentDidMount(){window.scrollTo(0,0);}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,title=_this$state2.title,category=_this$state2.category,author=_this$state2.author,date=_this$state2.date,description=_this$state2.description,body=_this$state2.body,categories=_this$state2.categories;var user=this.props.context.user;return!(user&&user.accessLevel<1)?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero is-primary \",children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-body container\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:\"Add Article or Notice\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{onSubmit:this.save,children:/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile is-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-one-third\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Title Of Post: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"title\",value:title,onChange:this.handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Category Of Post: \"}),categories.map(function(option,index){return/*#__PURE__*/_jsxs(\"label\",{children:[option,\" \",\" \",/*#__PURE__*/_jsx(\"input\",{name:\"category\",value:option,onChange:_this2.handleChange,type:\"radio\"}),\" \",\" \"]},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Author Of Post: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"author\",value:author,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",rows:\"3\",style:{resize:\"none\"},name:\"description\",value:description,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Body / Content : \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",rows:\"6\",style:{resize:\"block\"},name:\"body\",value:body,onChange:this.handleChange})]}),this.state.flash&&/*#__PURE__*/_jsx(\"div\",{className:\"notification \".concat(this.state.flash.status),children:this.state.flash.msg}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-clearfix\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-primary is-outlined is-pulled-right\",type:\"submit\",onClick:this.save,children:\"Submit\"})})]})})})]});}}]);return AddPosting;}(Component);export default withContext(AddPosting);","map":{"version":3,"sources":["/Users/cheykodon_7/Documents/WorkHome/jhcsite/src/components/AddPosting.js"],"names":["React","Component","withContext","Redirect","axios","initState","title","category","author","date","description","body","categories","AddPosting","props","FormatDate","d","month","getMonth","day","getDate","year","getFullYear","save","e","preventDefault","state","Date","post","res","id","context","addPosting","setState","flash","status","msg","handleChange","target","name","value","window","scrollTo","user","accessLevel","map","option","index","resize"],"mappings":"2mCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,SAAS,CAAG,CAChBC,KAAK,CAAE,EADS,CAEhBC,QAAQ,CAAE,EAFM,CAGhBC,MAAM,CAAE,EAHQ,CAIhBC,IAAI,CAAE,EAJU,CAKhBC,WAAW,CAAE,EALG,CAMhBC,IAAI,CAAE,EANU,CAOhBC,UAAU,CAAG,CAAC,SAAD,CAAW,QAAX,CAPG,CAAlB,C,GAUMC,CAAAA,U,wGACJ,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAQnBC,UARmB,CAQN,SAAAC,CAAC,CAAI,CAChB,GAAIC,CAAAA,KAAK,CAAGD,CAAC,CAACE,QAAF,GAAa,CAAzB,CACA,GAAIC,CAAAA,GAAG,CAAGH,CAAC,CAACI,OAAF,EAAV,CACA,GAAIC,CAAAA,IAAI,CAAGL,CAAC,CAACM,WAAF,EAAX,CACA,MAAQD,CAAAA,IAAI,CAAG,GAAP,CAAaJ,KAAb,CAAqB,GAArB,CAA2BE,GAAnC,CACD,CAbkB,OAenBI,IAfmB,0FAeZ,iBAAOC,CAAP,qLACLA,CAAC,CAACC,cAAF,GADK,YAEkD,MAAKC,KAFvD,CAEGpB,KAFH,aAEGA,KAFH,CAEUC,QAFV,aAEUA,QAFV,CAEoBC,MAFpB,aAEoBA,MAFpB,CAE4BE,WAF5B,aAE4BA,WAF5B,CAEyCC,IAFzC,aAEyCA,IAFzC,MAIDL,KAAK,EAAIK,IAAT,EAAiBJ,QAJhB,2BAKH;AACME,IANH,CAMU,MAAKM,UAAL,CAAgB,GAAIY,CAAAA,IAAJ,EAAhB,CANV,uBAOevB,CAAAA,KAAK,CAACwB,IAAN,CAChB,eADgB,CAEhB,CAAEtB,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAmBC,MAAM,CAANA,MAAnB,CAA2BC,IAAI,CAAJA,IAA3B,CAAiCC,WAAW,CAAXA,WAAjC,CAA8CC,IAAI,CAAJA,IAA9C,CAFgB,CAPf,QAOGkB,GAPH,eAYGC,EAZH,CAYQD,GAAG,CAACC,EAZZ,CAcH,MAAKhB,KAAL,CAAWiB,OAAX,CAAmBC,UAAnB,CACE,CACEF,EAAE,CAAFA,EADF,CACMxB,KAAK,CAALA,KADN,CACaC,QAAQ,CAARA,QADb,CACuBC,MAAM,CAANA,MADvB,CAC+BC,IAAI,CAAJA,IAD/B,CACqCC,WAAW,CAAXA,WADrC,CACkDC,IAAI,CAAJA,IADlD,CADF,CAIE,iBAAM,OAAKsB,QAAL,CAAc5B,SAAd,CAAN,EAJF,EAMA,MAAK4B,QAAL,CACE,CAAEC,KAAK,CAAE,CAAEC,MAAM,CAAE,YAAV,CAAwBC,GAAG,CAAE,8BAA7B,CAAT,CADF,EApBG,+BAyBH,MAAKH,QAAL,CACE,CAAEC,KAAK,CAAE,CAAEC,MAAM,CAAE,WAAV,CAAuBC,GAAG,CAAE,kDAA5B,CAAT,CADF,EAzBG,uDAfY,qEA8CnBC,YA9CmB,CA8CJ,SAAAb,CAAC,2BAAI,OAAKS,QAAL,mDAAiBT,CAAC,CAACc,MAAF,CAASC,IAA1B,CAAiCf,CAAC,CAACc,MAAF,CAASE,KAA1C,yCAAwD,EAAxD,kBAAJ,EA9CG,CAEjB,MAAKd,KAAL,CAAarB,SAAb,CAFiB,aAGlB,C,wDACD,4BAAoB,CAClBoC,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,C,sBA0CD,iBAAS,iBACP,iBAAyE,KAAKhB,KAA9E,CAAQpB,KAAR,cAAQA,KAAR,CAAeC,QAAf,cAAeA,QAAf,CAAyBC,MAAzB,cAAyBA,MAAzB,CAAiCC,IAAjC,cAAiCA,IAAjC,CAAuCC,WAAvC,cAAuCA,WAAvC,CAAoDC,IAApD,cAAoDA,IAApD,CAA0DC,UAA1D,cAA0DA,UAA1D,CACA,GAAQ+B,CAAAA,IAAR,CAAiB,KAAK7B,KAAL,CAAWiB,OAA5B,CAAQY,IAAR,CAEA,MAAO,EAAEA,IAAI,EAAIA,IAAI,CAACC,WAAL,CAAmB,CAA7B,eACL,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADK,cAGL,wCACE,YAAK,SAAS,CAAC,kBAAf,uBACE,YAAK,SAAS,CAAC,qBAAf,uBACE,WAAI,SAAS,CAAC,OAAd,mCADF,EADF,EADF,cAME,aANF,cAOE,aAPF,cAQE,aAAM,QAAQ,CAAE,KAAKrB,IAArB,uBACE,YAAK,SAAS,CAAC,+BAAf,uBACE,aAAK,SAAS,CAAC,qBAAf,wBACE,aAAK,SAAS,CAAC,OAAf,wBACE,cAAO,SAAS,CAAC,OAAjB,6BADF,cAEE,cACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEjB,KAJT,CAKE,QAAQ,CAAE,KAAK+B,YALjB,CAME,QAAQ,KANV,EAFF,GADF,cAYE,aAAK,SAAS,CAAC,OAAf,wBACE,cAAO,SAAS,CAAC,OAAjB,gCADF,CAEGzB,UAAU,CAACiC,GAAX,CAAe,SAACC,MAAD,CAAQC,KAAR,qBACd,yBACGD,MADH,KACY,GADZ,cAEE,cACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEA,MAFT,CAGE,QAAQ,CAAE,MAAI,CAACT,YAHjB,CAIE,IAAI,CAAC,OAJP,EAFF,KAOM,GAPN,GAAYU,KAAZ,CADc,EAAf,CAFH,GAZF,cA2BE,aAAK,SAAS,CAAC,OAAf,wBACA,cAAO,SAAS,CAAC,OAAjB,8BADA,cAEE,cACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,QAHP,CAIE,KAAK,CAAEvC,MAJT,CAKE,QAAQ,CAAE,KAAK6B,YALjB,EAFF,GA3BF,cAsCE,aAAK,SAAS,CAAC,OAAf,wBACE,cAAO,SAAS,CAAC,OAAjB,2BADF,cAEE,iBACE,SAAS,CAAC,UADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,GAHP,CAIE,KAAK,CAAE,CAAEW,MAAM,CAAE,MAAV,CAJT,CAKE,IAAI,CAAC,aALP,CAME,KAAK,CAAEtC,WANT,CAOE,QAAQ,CAAE,KAAK2B,YAPjB,EAFF,GAtCF,cAkDE,aAAK,SAAS,CAAC,OAAf,wBACE,cAAO,SAAS,CAAC,OAAjB,+BADF,cAEE,iBACE,SAAS,CAAC,UADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,GAHP,CAIE,KAAK,CAAE,CAAEW,MAAM,CAAE,OAAV,CAJT,CAKE,IAAI,CAAC,MALP,CAME,KAAK,CAAErC,IANT,CAOE,QAAQ,CAAE,KAAK0B,YAPjB,EAFF,GAlDF,CA8DG,KAAKX,KAAL,CAAWQ,KAAX,eACC,YAAK,SAAS,wBAAkB,KAAKR,KAAL,CAAWQ,KAAX,CAAiBC,MAAnC,CAAd,UACG,KAAKT,KAAL,CAAWQ,KAAX,CAAiBE,GADpB,EA/DJ,cAmEE,YAAK,SAAS,CAAC,mBAAf,uBACE,eACE,SAAS,CAAC,+CADZ,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAE,KAAKb,IAHhB,oBADF,EAnEF,GADF,EADF,EARF,GAHF,CA8FD,C,wBAnJsBtB,S,EAsJzB,cAAeC,CAAAA,WAAW,CAACW,UAAD,CAA1B","sourcesContent":["import React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\n\nconst initState = {\n  title: \"\",\n  category: \"\",\n  author: \"\",\n  date: \"\",\n  description: \"\",\n  body: \"\",\n  categories : [\"Article\",\"Notice\"]\n};\n\nclass AddPosting extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initState;\n  }\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  FormatDate = d => {\n    var month = d.getMonth()+1;\n    var day = d.getDate();\n    var year = d.getFullYear();\n    return (year + \"-\" + month + \"-\" + day);\n  }\n\n  save = async (e) => {\n    e.preventDefault();\n    const { title, category, author, description, body } = this.state;\n\n    if (title && body && category) {\n      //const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\n      const date = this.FormatDate(new Date());\n      const res = await axios.post(\n        '/api/postings',\n        { title, category, author, date, description, body },\n      )\n\n      const id = res.id;\n\n      this.props.context.addPosting(\n        {\n          id, title, category, author, date, description, body\n        },\n        () => this.setState(initState)\n      );\n      this.setState(\n        { flash: { status: 'is-success', msg: 'Posting created successfully' }}\n      );\n\n    } else {\n      this.setState(\n        { flash: { status: 'is-danger', msg: 'Please enter Title and Body of Notice or Article' }}\n      );\n    }\n  };\n\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\n\n  render() {\n    const { title, category, author, date, description, body, categories } = this.state;\n    const { user } = this.props.context;\n\n    return !(user && user.accessLevel < 1) ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <>\n        <div className=\"hero is-primary \">\n          <div className=\"hero-body container\">\n            <h4 className=\"title\">Add Article or Notice</h4>\n          </div>\n        </div>\n        <br />\n        <br />\n        <form onSubmit={this.save}>\n          <div className=\"columns is-mobile is-centered\">\n            <div className=\"column is-one-third\">\n              <div className=\"field\">\n                <label className=\"label\">Title Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"title\"\n                  value={title}\n                  onChange={this.handleChange}\n                  required\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Category Of Post: </label>\n                {categories.map((option,index) => (\n                  <label key={index}>\n                    {option} {\" \"}\n                    <input\n                      name=\"category\"\n                      value={option}\n                      onChange={this.handleChange}\n                      type=\"radio\"\n                    /> {\" \"}\n                    </label>\n                  \n                  ))}\n              </div>\n              <div className=\"field\">\n              <label className=\"label\">Author Of Post: </label>\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"author\"\n                  value={author}\n                  onChange={this.handleChange}\n                  \n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Description: </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"3\"\n                  style={{ resize: \"none\"}}\n                  name=\"description\"\n                  value={description}\n                  onChange={this.handleChange}\n                />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Body / Content : </label>\n                <textarea\n                  className=\"textarea\"\n                  type=\"text\"\n                  rows=\"6\"\n                  style={{ resize: \"block\"}}\n                  name=\"body\"\n                  value={body}\n                  onChange={this.handleChange}\n                />\n              </div>\n              {this.state.flash && (\n                <div className={`notification ${this.state.flash.status}`}>\n                  {this.state.flash.msg}\n                </div>\n              )}\n              <div className=\"field is-clearfix\">\n                <button\n                  className=\"button is-primary is-outlined is-pulled-right\"\n                  type=\"submit\"\n                  onClick={this.save}\n                >\n                  Submit\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n\nexport default withContext(AddPosting);"]},"metadata":{},"sourceType":"module"}